<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Hospital</title>
        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <meta name="description" content=""/>
        <meta name="author" content=""/>
        <link href="resources/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
        <link href="resources/css/sb-admin-2.css" rel="stylesheet" type="text/css"/>
        <link href="resources/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
        <link rel="icon" type="image/png" sizes="96x96" href="resources/images/smartphone.png"/>
    </h:head>
    <h:body>
        <h:form id="form">
            <p:growl id="msg" showDetail="true"/>
            <div class="container">
                <center><h1>SISTEMA HOSPITAL-LOAYZA</h1></center>
                <div class="row">
                    <div class="col-md-4 col-md-offset-4">               
                        <h:form role="form" rendered="#{usuarioController.inicio}">
                            <div class="login-panel panel panel-default">
                                <div class="panel-heading">
                                    <center><h3 class="panel-title">Inicio de Sesión</h3></center>
                                </div>
                                <div class="panel-body">

                                    <fieldset>
                                        <div class="form-group">
                                            <div class="input-group margin-bottom-sm">
                                                <span class="input-group-addon"><i class="fa fa-user-circle-o fa-fw"></i></span>
                                                <p:inputText id="user" class="form-control" placeholder="Usuario" value="#{usuarioController.selected.usuusu}">
                                                    <!--<p:ajax event="blur" update="user"/>-->
                                                </p:inputText>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group">
                                                <span class="input-group-addon"><i class="fa fa-key fa-fw" aria-hidden="true"></i></span>
                                                <p:password class="form-control" placeholder="Contraseña" value="#{usuarioController.selected.pwdusu}"/>
                                            </div>
                                        </div>

                                        <div class="margin-bottom-sm">
                                            <center> <p:commandButton icon="fa fa-unlock"
                                                                      class="btn btn-success"
                                                                      value="Iniciar Sesión"
                                                                      actionListener="#{usuarioController.logeo()}"
                                                                      oncomplete="PF('pbAjax').start();"
                                                                      update=":form"/></center>
                                        </div>
                                    </fieldset>
                                </div>                            
                            </div>
                        </h:form>   
                        <h:form rendered="#{!usuarioController.inicio}">
                            <p:growl id="growl" />                                    
                            <br /><br />
                            <p:progressBar widgetVar="pbAjax" ajax="true" value="#{usuarioController.progress}" 
                                           labelTemplate="{value}%" styleClass="animated" global="false">
                                <p:ajax event="complete" listener="#{usuarioController.redirec()}" update="growl"/>
                            </p:progressBar>
                        </h:form>
                    </div>
                </div>
            </div>
        </h:form>
    </h:body>
</html>